<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Laporan Psikologi Sukan SSMT 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .sidebar-hidden { transform: translateX(-100%); }
        .progress-bar { background: linear-gradient(90deg, #3B82F6, #10B981); }
        .notification { animation: slideIn 0.3s ease-out; }
        @keyframes slideIn { from { transform: translateX(100%); } to { transform: translateX(0); } }
    </style>
</head>
<body class="bg-gray-100">
    <!-- Sidebar -->
    <div id="sidebar" class="fixed left-0 top-0 h-full w-64 bg-white shadow-lg transform transition-transform duration-300 z-40">
        <div class="p-6 border-b border-gray-200">
            <h2 class="text-xl font-bold text-gray-800">SSMT 2025</h2>
            <p class="text-sm text-gray-600">Sistem Psikologi Sukan</p>
        </div>
        
        <!-- User Profile -->
        <div class="p-4 border-b border-gray-200">
            <div class="flex items-center">
                <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white font-semibold">
                    NH
                </div>
                <div class="ml-3">
                    <p class="text-sm font-medium text-gray-800">Psikologis Sukan</p>
                    <p class="text-xs text-gray-600">Cik Nur Husna binti Ismail</p>
                </div>
            </div>
        </div>
        
        <!-- Navigation -->
        <nav class="mt-4">
            <a href="#" onclick="showSection('dashboard')" class="nav-link flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50 bg-blue-50 text-blue-600">
                <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"></path>
                </svg>
                Dashboard
            </a>
            <a href="#" onclick="showSection('athletes')" class="nav-link flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50">
                <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                </svg>
                Senarai Atlet
            </a>
            <a href="#" onclick="showSection('calendar')" class="nav-link flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50">
                <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                </svg>
                Kalendar
            </a>
            <a href="#" onclick="showSection('analytics')" class="nav-link flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50">
                <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                </svg>
                Analytics
            </a>
            <a href="#" onclick="showSection('reports')" class="nav-link flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50">
                <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                </svg>
                Laporan
            </a>
            <a href="#" onclick="showSection('attendance')" class="nav-link flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50">
                <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
                </svg>
                Kehadiran
            </a>
            <a href="#" onclick="showSection('goals')" class="nav-link flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50">
                <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path>
                </svg>
                Matlamat
            </a>
        </nav>
        
        <!-- Logout -->
        <div class="absolute bottom-4 left-4 right-4">
            <button onclick="logout()" class="w-full flex items-center px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg">
                <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                </svg>
                Log Keluar
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <div id="mainContent" class="ml-64 min-h-screen">
        <!-- Top Bar -->
        <div class="bg-white shadow-sm border-b border-gray-200 px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center">
                    <button onclick="toggleSidebar()" class="md:hidden mr-4 p-2 rounded-lg hover:bg-gray-100">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                    <h1 class="text-2xl font-bold text-gray-800">Sistem Laporan Psikologi Sukan</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="text-sm text-gray-600" id="currentDateTime"></div>
                    <button onclick="toggleNotifications()" class="relative p-2 rounded-lg hover:bg-gray-100">
                        <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5v-5zM11 19H6.5A2.5 2.5 0 014 16.5v-9A2.5 2.5 0 016.5 5h11A2.5 2.5 0 0120 7.5v3"></path>
                        </svg>
                        <span class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">3</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Notification Panel -->
        <div id="notificationPanel" class="hidden absolute right-6 top-16 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-30">
            <div class="p-4 border-b border-gray-200">
                <h3 class="font-semibold text-gray-800">Notifikasi</h3>
            </div>
            <div class="p-4 space-y-3">
                <div class="flex items-start space-x-3">
                    <div class="w-2 h-2 bg-blue-500 rounded-full mt-2"></div>
                    <div>
                        <p class="text-sm text-gray-800">Sesi dengan Ahmad Faiz pada 2:00 PM</p>
                        <p class="text-xs text-gray-500">15 minit lagi</p>
                    </div>
                </div>
                <div class="flex items-start space-x-3">
                    <div class="w-2 h-2 bg-green-500 rounded-full mt-2"></div>
                    <div>
                        <p class="text-sm text-gray-800">Laporan bulanan siap</p>
                        <p class="text-xs text-gray-500">2 jam lalu</p>
                    </div>
                </div>
                <div class="flex items-start space-x-3">
                    <div class="w-2 h-2 bg-yellow-500 rounded-full mt-2"></div>
                    <div>
                        <p class="text-sm text-gray-800">Kemaskini data atlet diperlukan</p>
                        <p class="text-xs text-gray-500">1 hari lalu</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Dashboard Section -->
        <div id="dashboardSection" class="section p-6">
            <!-- Statistics Cards -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <div class="flex items-center">
                        <div class="bg-blue-100 p-3 rounded-full">
                            <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                            </svg>
                        </div>
                        <div class="ml-4">
                            <div class="text-2xl font-bold text-gray-800" id="totalAtlet">12</div>
                            <div class="text-sm text-gray-600">Jumlah Atlet</div>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-md p-6">
                    <div class="flex items-center">
                        <div class="bg-green-100 p-3 rounded-full">
                            <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                            </svg>
                        </div>
                        <div class="ml-4">
                            <div class="text-2xl font-bold text-gray-800" id="sesiKumpulan">8</div>
                            <div class="text-sm text-gray-600">Sesi Kumpulan</div>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-md p-6">
                    <div class="flex items-center">
                        <div class="bg-yellow-100 p-3 rounded-full">
                            <svg class="w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                        </div>
                        <div class="ml-4">
                            <div class="text-2xl font-bold text-gray-800" id="sesiIndividu">4</div>
                            <div class="text-sm text-gray-600">Sesi Individu</div>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-md p-6">
                    <div class="flex items-center">
                        <div class="bg-purple-100 p-3 rounded-full">
                            <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                            </svg>
                        </div>
                        <div class="ml-4">
                            <div class="text-2xl font-bold text-gray-800" id="kemajuan">85%</div>
                            <div class="text-sm text-gray-600">Kemajuan Keseluruhan</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Trend Sesi Bulanan</h3>
                    <canvas id="monthlyChart" width="400" height="200"></canvas>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Prestasi Mengikut Acara</h3>
                    <canvas id="performanceChart" width="400" height="200"></canvas>
                </div>
            </div>

            <!-- Upcoming Sessions -->
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">Sesi Akan Datang</h3>
                <div class="space-y-3">
                    <div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg">
                        <div>
                            <p class="font-medium text-gray-800">Ahmad Faiz - Sesi Individu</p>
                            <p class="text-sm text-gray-600">Hari ini, 2:00 PM</p>
                        </div>
                        <span class="px-3 py-1 bg-blue-600 text-white text-sm rounded-full">15 min</span>
                    </div>
                    <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg">
                        <div>
                            <p class="font-medium text-gray-800">Kumpulan Sepak Takraw - Sesi Motivasi</p>
                            <p class="text-sm text-gray-600">Esok, 10:00 AM</p>
                        </div>
                        <span class="px-3 py-1 bg-green-600 text-white text-sm rounded-full">Esok</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Athletes Section -->
        <div id="athletesSection" class="section hidden p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800">Pengurusan Atlet</h2>
                <button onclick="showAddForm()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                    </svg>
                    Tambah Atlet
                </button>
            </div>

            <!-- Filters -->
            <div class="bg-white rounded-lg shadow-md p-4 mb-6">
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <input type="text" id="searchInput" placeholder="Cari atlet..." class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" onkeyup="searchAtlet()">
                    <select id="filterAcara" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" onchange="filterAtlets()">
                        <option value="">Semua Acara</option>
                        <option value="Olahraga">Olahraga</option>
                        <option value="Sepak Takraw">Sepak Takraw</option>
                        <option value="Silat">Silat</option>
                        <option value="Judo">Judo</option>
                        <option value="Boling Padang">Boling Padang</option>
                        <option value="Lawan Pedang">Lawan Pedang</option>
                        <option value="Angkat Berat">Angkat Berat</option>
                    </select>
                    <select id="filterJenisSesi" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" onchange="filterAtlets()">
                        <option value="">Semua Jenis Sesi</option>
                        <option value="Individu">Individu</option>
                        <option value="Kumpulan">Kumpulan</option>
                    </select>
                    <button onclick="exportData()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-colors">
                        Eksport Data
                    </button>
                </div>
            </div>

            <!-- Athletes Table -->
            <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nama</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Umur</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Acara</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Jurulatih</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Jenis Sesi</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Kemajuan</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tindakan</th>
                            </tr>
                        </thead>
                        <tbody id="atletTable" class="bg-white divide-y divide-gray-200">
                            <!-- Data will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Calendar Section -->
        <div id="calendarSection" class="section hidden p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800">Kalendar Sesi</h2>
                <button onclick="showScheduleForm()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors">
                    Jadual Sesi Baru
                </button>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <div class="lg:col-span-2 bg-white rounded-xl shadow-lg p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold text-gray-800" id="currentMonth">Januari 2025</h3>
                        <div class="flex space-x-2">
                            <button onclick="prevMonth()" class="p-2 hover:bg-gray-100 rounded-lg">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                                </svg>
                            </button>
                            <button onclick="nextMonth()" class="p-2 hover:bg-gray-100 rounded-lg">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div id="calendar" class="grid grid-cols-7 gap-1">
                        <!-- Calendar will be generated by JavaScript -->
                    </div>
                </div>
                
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Sesi Akan Datang</h3>
                    <div class="space-y-3">
                        <div class="p-3 bg-blue-50 rounded-lg">
                            <p class="font-medium text-sm">Ahmad Faiz</p>
                            <p class="text-xs text-gray-600">Hari ini, 2:00 PM</p>
                            <p class="text-xs text-blue-600">Sesi Individu</p>
                        </div>
                        <div class="p-3 bg-green-50 rounded-lg">
                            <p class="font-medium text-sm">Kumpulan Sepak Takraw</p>
                            <p class="text-xs text-gray-600">Esok, 10:00 AM</p>
                            <p class="text-xs text-green-600">Sesi Kumpulan</p>
                        </div>
                        <div class="p-3 bg-yellow-50 rounded-lg">
                            <p class="font-medium text-sm">Siti Nurhaliza</p>
                            <p class="text-xs text-gray-600">Khamis, 3:00 PM</p>
                            <p class="text-xs text-yellow-600">Sesi Individu</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Analytics Section -->
        <div id="analyticsSection" class="section hidden p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800">Analytics & Insights</h2>
                <div class="flex space-x-2">
                    <select class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        <option>Bulan Ini</option>
                        <option>3 Bulan Lepas</option>
                        <option>6 Bulan Lepas</option>
                        <option>Tahun Ini</option>
                    </select>
                </div>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Kemajuan Atlet</h3>
                    <canvas id="progressChart" width="400" height="300"></canvas>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Prestasi Atlet Individu</h3>
                    <div class="mb-4">
                        <select id="atletSelector" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" onchange="updateIndividualChart()">
                            <option value="">Pilih Atlet</option>
                            <!-- Options will be populated by JavaScript -->
                        </select>
                    </div>
                    <canvas id="individualChart" width="400" height="300"></canvas>
                </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h4 class="font-semibold text-gray-800 mb-3">Top Performers</h4>
                    <div class="space-y-2">
                        <div class="flex justify-between items-center">
                            <span class="text-sm">Ahmad Faiz</span>
                            <span class="text-sm font-medium text-green-600">95%</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm">Siti Nurhaliza</span>
                            <span class="text-sm font-medium text-green-600">88%</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm">Muhammad Hakim</span>
                            <span class="text-sm font-medium text-blue-600">82%</span>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h4 class="font-semibold text-gray-800 mb-3">Acara Terbaik</h4>
                    <div class="space-y-2">
                        <div class="flex justify-between items-center">
                            <span class="text-sm">Sepak Takraw</span>
                            <span class="text-sm font-medium text-green-600">92%</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm">Silat</span>
                            <span class="text-sm font-medium text-blue-600">87%</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm">Judo</span>
                            <span class="text-sm font-medium text-yellow-600">78%</span>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h4 class="font-semibold text-gray-800 mb-3">Trend Mingguan</h4>
                    <div class="space-y-2">
                        <div class="flex justify-between items-center">
                            <span class="text-sm">Sesi Selesai</span>
                            <span class="text-sm font-medium text-green-600">+15%</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm">Kehadiran</span>
                            <span class="text-sm font-medium text-green-600">+8%</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm">Satisfaction</span>
                            <span class="text-sm font-medium text-blue-600">+3%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Reports Section -->
        <div id="reportsSection" class="section hidden p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800">Laporan dan Analisis</h2>
                <button onclick="generateReport()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                    Jana Laporan PDF
                </button>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Laporan Mingguan</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between">
                            <span class="text-gray-600">Sesi Selesai</span>
                            <span class="font-medium">12</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Atlet Aktif</span>
                            <span class="font-medium">8</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Kemajuan Purata</span>
                            <span class="font-medium text-green-600">+15%</span>
                        </div>
                    </div>
                    <button onclick="downloadWeeklyReport()" class="w-full mt-4 bg-gray-100 hover:bg-gray-200 text-gray-800 py-2 px-4 rounded-lg font-medium transition-colors">
                        Muat Turun
                    </button>
                </div>
                
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Laporan Bulanan</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between">
                            <span class="text-gray-600">Sesi Selesai</span>
                            <span class="font-medium">48</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Matlamat Dicapai</span>
                            <span class="font-medium">6</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Satisfaction Rate</span>
                            <span class="font-medium text-green-600">92%</span>
                        </div>
                    </div>
                    <button onclick="downloadMonthlyReport()" class="w-full mt-4 bg-gray-100 hover:bg-gray-200 text-gray-800 py-2 px-4 rounded-lg font-medium transition-colors">
                        Muat Turun
                    </button>
                </div>
                
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Laporan Tahunan</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between">
                            <span class="text-gray-600">Total Sesi</span>
                            <span class="font-medium">576</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Atlet Dibantu</span>
                            <span class="font-medium">24</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Success Rate</span>
                            <span class="font-medium text-green-600">88%</span>
                        </div>
                    </div>
                    <button onclick="downloadYearlyReport()" class="w-full mt-4 bg-gray-100 hover:bg-gray-200 text-gray-800 py-2 px-4 rounded-lg font-medium transition-colors">
                        Muat Turun
                    </button>
                </div>
            </div>
            
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">Laporan Terperinci</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                    <select class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        <option>Pilih Jenis Laporan</option>
                        <option>Kemajuan Individu</option>
                        <option>Analisis Kumpulan</option>
                        <option>Prestasi Acara</option>
                        <option>Trend Bulanan</option>
                    </select>
                    <input type="date" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                    <input type="date" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                </div>
                <button class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium transition-colors">
                    Jana Laporan Kustom
                </button>
            </div>
        </div>

        <!-- Attendance Section -->
        <div id="attendanceSection" class="section hidden p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800">Kehadiran Atlet</h2>
                <button onclick="showAttendanceForm()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                    </svg>
                    Rekod Kehadiran
                </button>
            </div>

            <!-- Attendance Summary Cards -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <div class="flex items-center">
                        <div class="bg-green-100 p-3 rounded-full">
                            <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4"></path>
                            </svg>
                        </div>
                        <div class="ml-4">
                            <div class="text-2xl font-bold text-gray-800">8</div>
                            <div class="text-sm text-gray-600">Hadir Hari Ini</div>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-md p-6">
                    <div class="flex items-center">
                        <div class="bg-red-100 p-3 rounded-full">
                            <svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </div>
                        <div class="ml-4">
                            <div class="text-2xl font-bold text-gray-800">2</div>
                            <div class="text-sm text-gray-600">Tidak Hadir</div>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-md p-6">
                    <div class="flex items-center">
                        <div class="bg-yellow-100 p-3 rounded-full">
                            <svg class="w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <div class="ml-4">
                            <div class="text-2xl font-bold text-gray-800">1</div>
                            <div class="text-sm text-gray-600">Lewat</div>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-md p-6">
                    <div class="flex items-center">
                        <div class="bg-blue-100 p-3 rounded-full">
                            <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                            </svg>
                        </div>
                        <div class="ml-4">
                            <div class="text-2xl font-bold text-gray-800">82%</div>
                            <div class="text-sm text-gray-600">Persentase Kehadiran</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Attendance Table -->
            <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tarikh</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nama Atlet</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Acara</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Sesi</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Masa</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Catatan</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">15/01/2025</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">Ahmad Faiz</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Sepak Takraw</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Pagi</td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Hadir</span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">08:00</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Tepat masa</td>
                            </tr>
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">15/01/2025</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">Siti Nurhaliza</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Silat</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Petang</td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">Lewat</span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">14:15</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Lewat 15 minit</td>
                            </tr>
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">15/01/2025</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">Muhammad Hakim</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Judo</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Pagi</td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">Tidak Hadir</span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">-</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Tanpa sebab</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Goals Section -->
        <div id="goalsSection" class="section hidden p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800">Pengurusan Matlamat</h2>
                <button onclick="showGoalForm()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors">
                    Tambah Matlamat Baru
                </button>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Matlamat Jangka Pendek</h3>
                    <div class="space-y-4">
                        <div class="border-l-4 border-blue-500 pl-4">
                            <h4 class="font-medium text-gray-800">Tingkatkan Keyakinan Diri</h4>
                            <p class="text-sm text-gray-600">Ahmad Faiz - Sepak Takraw</p>
                            <div class="mt-2">
                                <div class="flex justify-between text-sm">
                                    <span>Kemajuan</span>
                                    <span>75%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2 mt-1">
                                    <div class="bg-blue-500 h-2 rounded-full" style="width: 75%"></div>
                                </div>
                            </div>
                            <p class="text-xs text-gray-500 mt-2">Target: 31 Jan 2025</p>
                        </div>
                        
                        <div class="border-l-4 border-green-500 pl-4">
                            <h4 class="font-medium text-gray-800">Kurangkan Kebimbangan</h4>
                            <p class="text-sm text-gray-600">Siti Nurhaliza - Silat</p>
                            <div class="mt-2">
                                <div class="flex justify-between text-sm">
                                    <span>Kemajuan</span>
                                    <span>90%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2 mt-1">
                                    <div class="bg-green-500 h-2 rounded-full" style="width: 90%"></div>
                                </div>
                            </div>
                            <p class="text-xs text-gray-500 mt-2">Target: 28 Jan 2025</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Matlamat Jangka Sederhana</h3>
                    <div class="space-y-4">
                        <div class="border-l-4 border-yellow-500 pl-4">
                            <h4 class="font-medium text-gray-800">Kawalan Emosi Semasa Pertandingan</h4>
                            <p class="text-sm text-gray-600">Muhammad Hakim - Judo</p>
                            <div class="mt-2">
                                <div class="flex justify-between text-sm">
                                    <span>Kemajuan</span>
                                    <span>45%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2 mt-1">
                                    <div class="bg-yellow-500 h-2 rounded-full" style="width: 45%"></div>
                                </div>
                            </div>
                            <p class="text-xs text-gray-500 mt-2">Target: 15 Mac 2025</p>
                        </div>
                        
                        <div class="border-l-4 border-purple-500 pl-4">
                            <h4 class="font-medium text-gray-800">Peningkatan Fokus</h4>
                            <p class="text-sm text-gray-600">Kumpulan Sepak Takraw</p>
                            <div class="mt-2">
                                <div class="flex justify-between text-sm">
                                    <span>Kemajuan</span>
                                    <span>60%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2 mt-1">
                                    <div class="bg-purple-500 h-2 rounded-full" style="width: 60%"></div>
                                </div>
                            </div>
                            <p class="text-xs text-gray-500 mt-2">Target: 28 Feb 2025</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Matlamat Jangka Panjang</h3>
                    <div class="space-y-4">
                        <div class="border-l-4 border-red-500 pl-4">
                            <h4 class="font-medium text-gray-800">Kesiapan Mental Kejohanan</h4>
                            <p class="text-sm text-gray-600">Semua Atlet</p>
                            <div class="mt-2">
                                <div class="flex justify-between text-sm">
                                    <span>Kemajuan</span>
                                    <span>25%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2 mt-1">
                                    <div class="bg-red-500 h-2 rounded-full" style="width: 25%"></div>
                                </div>
                            </div>
                            <p class="text-xs text-gray-500 mt-2">Target: 30 Jun 2025</p>
                        </div>
                        
                        <div class="border-l-4 border-indigo-500 pl-4">
                            <h4 class="font-medium text-gray-800">Program Kepimpinan</h4>
                            <p class="text-sm text-gray-600">Atlet Senior</p>
                            <div class="mt-2">
                                <div class="flex justify-between text-sm">
                                    <span>Kemajuan</span>
                                    <span>15%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2 mt-1">
                                    <div class="bg-indigo-500 h-2 rounded-full" style="width: 15%"></div>
                                </div>
                            </div>
                            <p class="text-xs text-gray-500 mt-2">Target: 31 Dis 2025</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add/Edit Form Modal -->
    <div id="formModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-screen overflow-y-auto">
                <div class="px-6 py-4 border-b border-gray-200">
                    <h3 class="text-xl font-semibold text-gray-800" id="formTitle">Tambah Atlet Baru</h3>
                </div>
                <form id="atletForm" class="p-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Nama Penuh</label>
                            <input type="text" id="nama" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Umur</label>
                            <input type="number" id="umur" min="12" max="25" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Jantina</label>
                            <select id="jantina" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                                <option value="">Pilih Jantina</option>
                                <option value="Lelaki">Lelaki</option>
                                <option value="Perempuan">Perempuan</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Acara Sukan</label>
                            <select id="acaraSukan" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                                <option value="">Pilih Acara</option>
                                <option value="Olahraga">Olahraga</option>
                                <option value="Sepak Takraw">Sepak Takraw</option>
                                <option value="Silat">Silat</option>
                                <option value="Judo">Judo</option>
                                <option value="Boling Padang">Boling Padang</option>
                                <option value="Lawan Pedang">Lawan Pedang</option>
                                <option value="Angkat Berat">Angkat Berat</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Nama Jurulatih</label>
                            <input type="text" id="jurulatih" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Jenis Sesi Psikologi</label>
                            <select id="jenisSesi" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                                <option value="">Pilih Jenis Sesi</option>
                                <option value="Individu">Individu</option>
                                <option value="Kumpulan">Kumpulan</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Advanced Assessment Fields -->
                    <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Mental Toughness Score (1-10)</label>
                            <input type="range" id="mentalToughness" min="1" max="10" value="5" class="w-full" oninput="updateRangeValue('mentalToughness', 'mentalToughnessValue')">
                            <div class="flex justify-between text-sm text-gray-500 mt-1">
                                <span>1</span>
                                <span id="mentalToughnessValue" class="font-medium">5</span>
                                <span>10</span>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Confidence Level (1-10)</label>
                            <input type="range" id="confidenceLevel" min="1" max="10" value="5" class="w-full" oninput="updateRangeValue('confidenceLevel', 'confidenceLevelValue')">
                            <div class="flex justify-between text-sm text-gray-500 mt-1">
                                <span>1</span>
                                <span id="confidenceLevelValue" class="font-medium">5</span>
                                <span>10</span>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Stress Management (1-10)</label>
                            <input type="range" id="stressManagement" min="1" max="10" value="5" class="w-full" oninput="updateRangeValue('stressManagement', 'stressManagementValue')">
                            <div class="flex justify-between text-sm text-gray-500 mt-1">
                                <span>1</span>
                                <span id="stressManagementValue" class="font-medium">5</span>
                                <span>10</span>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Focus & Concentration (1-10)</label>
                            <input type="range" id="focusLevel" min="1" max="10" value="5" class="w-full" oninput="updateRangeValue('focusLevel', 'focusLevelValue')">
                            <div class="flex justify-between text-sm text-gray-500 mt-1">
                                <span>1</span>
                                <span id="focusLevelValue" class="font-medium">5</span>
                                <span>10</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Dapatan Sesi</label>
                        <textarea id="dapatanSesi" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Catatan mengenai dapatan dari sesi psikologi..."></textarea>
                    </div>
                    
                    <div class="mt-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Intervensi dan Penilaian Psikologi</label>
                        <textarea id="intervensi" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Butiran intervensi dan penilaian psikologi yang dilakukan..."></textarea>
                    </div>
                    
                    <div class="mt-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Tindakan / Cadangan</label>
                        <textarea id="tindakan" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Tindakan susulan atau cadangan untuk atlet..."></textarea>
                    </div>
                    
                    <div class="flex justify-end space-x-4 mt-8">
                        <button type="button" onclick="closeForm()" class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors">Batal</button>
                        <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">Simpan</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Detail Modal -->
    <div id="detailModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-screen overflow-y-auto">
                <div class="px-6 py-4 border-b border-gray-200">
                    <h3 class="text-xl font-semibold text-gray-800">Butiran Atlet</h3>
                </div>
                <div id="detailContent" class="p-6">
                    <!-- Detail content will be populated by JavaScript -->
                </div>
                <div class="px-6 py-4 border-t border-gray-200">
                    <button onclick="closeDetail()" class="px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors">Tutup</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Enhanced data structure with new fields
        let atletData = [
            {
                id: 1,
                nama: "Ahmad Faiz bin Abdullah",
                umur: 17,
                jantina: "Lelaki",
                acaraSukan: "Sepak Takraw",
                jurulatih: "Cikgu Siti Aminah",
                jenisSesi: "Individu",
                dapatanSesi: "Menunjukkan peningkatan keyakinan diri dan fokus semasa permainan. Masih perlu kerja pada pengurusan tekanan.",
                intervensi: "Teknik pernafasan dan visualisasi. Latihan mindfulness 10 minit sebelum pertandingan.",
                tindakan: "Sambung sesi individu mingguan. Pantau kemajuan dalam pertandingan seterusnya.",
                mentalToughness: 8,
                confidenceLevel: 7,
                stressManagement: 6,
                focusLevel: 9,
                progress: 85,
                lastSession: "2025-01-15"
            },
            {
                id: 2,
                nama: "Siti Nurhaliza binti Hassan",
                umur: 16,
                jantina: "Perempuan",
                acaraSukan: "Silat",
                jurulatih: "Coach Rahman",
                jenisSesi: "Kumpulan",
                dapatanSesi: "Berjaya mengatasi kebimbangan prestasi. Menunjukkan semangat pasukan yang baik.",
                intervensi: "Sesi kumpulan motivasi dan penetapan matlamat. Teknik relaksasi progresif.",
                tindakan: "Teruskan sesi kumpulan. Fokus pada strategi pertandingan untuk kejohanan akan datang.",
                mentalToughness: 7,
                confidenceLevel: 8,
                stressManagement: 8,
                focusLevel: 7,
                progress: 78,
                lastSession: "2025-01-14"
            },
            {
                id: 3,
                nama: "Muhammad Hakim bin Rashid",
                umur: 18,
                jantina: "Lelaki",
                acaraSukan: "Judo",
                jurulatih: "Coach Azman",
                jenisSesi: "Kumpulan",
                dapatanSesi: "Kepimpinan yang baik dalam pasukan. Perlu kerja pada kawalan emosi semasa permainan.",
                intervensi: "Latihan kepimpinan dan komunikasi. Teknik pengurusan kemarahan.",
                tindakan: "Jadikan kapten pasukan. Sesi individu untuk pengurusan emosi.",
                mentalToughness: 9,
                confidenceLevel: 6,
                stressManagement: 5,
                focusLevel: 8,
                progress: 72,
                lastSession: "2025-01-13"
            },
            {
                id: 4,
                nama: "Nurul Aina binti Mohd Yusof",
                umur: 15,
                jantina: "Perempuan",
                acaraSukan: "Olahraga",
                jurulatih: "Coach Lim",
                jenisSesi: "Individu",
                dapatanSesi: "Atlet muda yang berbakat. Perlu bimbingan untuk menguruskan tekanan persaingan.",
                intervensi: "Program pembangunan keyakinan diri. Teknik goal setting yang berkesan.",
                tindakan: "Sesi individu dua kali seminggu. Pantau perkembangan fizikal dan mental.",
                mentalToughness: 6,
                confidenceLevel: 5,
                stressManagement: 7,
                focusLevel: 8,
                progress: 68,
                lastSession: "2025-01-12"
            },
            {
                id: 5,
                nama: "Mohd Izzat bin Hassan",
                umur: 19,
                jantina: "Lelaki",
                acaraSukan: "Angkat Berat",
                jurulatih: "Coach Ahmad",
                jenisSesi: "Individu",
                dapatanSesi: "Atlet berpengalaman dengan mental yang kuat. Fokus pada fine-tuning prestasi.",
                intervensi: "Teknik visualisasi lanjutan. Program mental conditioning untuk pertandingan elit.",
                tindakan: "Persiapan mental untuk kejohanan kebangsaan. Sesi bulanan untuk maintenance.",
                mentalToughness: 9,
                confidenceLevel: 9,
                stressManagement: 8,
                focusLevel: 9,
                progress: 92,
                lastSession: "2025-01-11"
            }
        ];

        let editingId = null;
        let currentSection = 'dashboard';
        let currentUser = { name: 'Psikologis Sukan', role: 'Cik Nur Husna binti Ismail' };
        let currentMonth = new Date().getMonth();
        let currentYear = new Date().getFullYear();
        let monthNames = ['Januari', 'Februari', 'Mac', 'April', 'Mei', 'Jun', 'Julai', 'Ogos', 'September', 'Oktober', 'November', 'Disember'];
        
        // Charts variables
        let monthlyChart, performanceChart, progressChart, individualChart;

        // Section Management
        function showSection(section) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(s => s.classList.add('hidden'));
            
            // Show selected section
            document.getElementById(section + 'Section').classList.remove('hidden');
            
            // Update navigation
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('bg-blue-50', 'text-blue-600');
                link.classList.add('text-gray-600', 'hover:bg-gray-50');
            });
            
            event.target.closest('.nav-link').classList.add('bg-blue-50', 'text-blue-600');
            event.target.closest('.nav-link').classList.remove('text-gray-600', 'hover:bg-gray-50');
            
            currentSection = section;
            
            // Initialize section-specific content
            if (section === 'dashboard') {
                initCharts();
            } else if (section === 'calendar') {
                generateCalendar();
            } else if (section === 'analytics') {
                initAnalyticsCharts();
            }
        }

        // Sidebar Toggle
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            
            if (window.innerWidth <= 768) {
                sidebar.classList.toggle('sidebar-hidden');
            }
        }

        // Notifications
        function toggleNotifications() {
            const panel = document.getElementById('notificationPanel');
            panel.classList.toggle('hidden');
        }

        // Range Value Updates
        function updateRangeValue(rangeId, valueId) {
            const range = document.getElementById(rangeId);
            const valueSpan = document.getElementById(valueId);
            valueSpan.textContent = range.value;
        }

        // Charts Initialization
        function initCharts() {
            // Monthly Trend Chart
            const monthlyCtx = document.getElementById('monthlyChart');
            if (monthlyCtx && !monthlyChart) {
                monthlyChart = new Chart(monthlyCtx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mac', 'Apr', 'Mei', 'Jun'],
                        datasets: [{
                            label: 'Sesi Individu',
                            data: [12, 15, 18, 14, 20, 16],
                            borderColor: '#3B82F6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            tension: 0.4
                        }, {
                            label: 'Sesi Kumpulan',
                            data: [8, 10, 12, 9, 14, 11],
                            borderColor: '#10B981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'top',
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });
            }

            // Performance Chart
            const performanceCtx = document.getElementById('performanceChart');
            if (performanceCtx && !performanceChart) {
                performanceChart = new Chart(performanceCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Sepak Takraw', 'Silat', 'Judo', 'Olahraga', 'Angkat Berat'],
                        datasets: [{
                            data: [25, 20, 20, 20, 15],
                            backgroundColor: ['#3B82F6', '#10B981', '#F59E0B', '#EF4444', '#8B5CF6']
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        }
                    }
                });
            }
        }

        // Analytics Charts
        function initAnalyticsCharts() {
            // Progress Chart
            const progressCtx = document.getElementById('progressChart');
            if (progressCtx && !progressChart) {
                progressChart = new Chart(progressCtx, {
                    type: 'bar',
                    data: {
                        labels: atletData.map(a => a.nama.split(' ')[0]),
                        datasets: [{
                            label: 'Kemajuan (%)',
                            data: atletData.map(a => a.progress),
                            backgroundColor: '#3B82F6'
                        }]
                    },
                    options: {
                        responsive: true,
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100
                            }
                        }
                    }
                });
            }

            // Populate athlete selector
            populateAtletSelector();

            // Individual Performance Chart (initially empty)
            const individualCtx = document.getElementById('individualChart');
            if (individualCtx && !individualChart) {
                individualChart = new Chart(individualCtx, {
                    type: 'radar',
                    data: {
                        labels: ['Mental Toughness', 'Confidence', 'Stress Management', 'Focus'],
                        datasets: [{
                            label: 'Prestasi',
                            data: [0, 0, 0, 0],
                            borderColor: '#3B82F6',
                            backgroundColor: 'rgba(59, 130, 246, 0.2)',
                            pointBackgroundColor: '#3B82F6',
                            pointBorderColor: '#fff',
                            pointHoverBackgroundColor: '#fff',
                            pointHoverBorderColor: '#3B82F6'
                        }]
                    },
                    options: {
                        responsive: true,
                        scales: {
                            r: {
                                beginAtZero: true,
                                max: 10,
                                ticks: {
                                    stepSize: 2
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            }
                        }
                    }
                });
            }
        }

        function populateAtletSelector() {
            const selector = document.getElementById('atletSelector');
            selector.innerHTML = '<option value="">Pilih Atlet</option>';
            
            atletData.forEach(atlet => {
                const option = document.createElement('option');
                option.value = atlet.id;
                option.textContent = atlet.nama;
                selector.appendChild(option);
            });
        }

        function updateIndividualChart() {
            const selector = document.getElementById('atletSelector');
            const atletId = parseInt(selector.value);
            
            if (!atletId || !individualChart) return;
            
            const atlet = atletData.find(a => a.id === atletId);
            if (!atlet) return;
            
            // Update chart data
            individualChart.data.datasets[0].data = [
                atlet.mentalToughness,
                atlet.confidenceLevel,
                atlet.stressManagement,
                atlet.focusLevel
            ];
            individualChart.data.datasets[0].label = atlet.nama.split(' ')[0];
            
            individualChart.update();
        }

        // Calendar Functions
        function generateCalendar() {
            const calendar = document.getElementById('calendar');
            const monthSpan = document.getElementById('currentMonth');
            
            monthSpan.textContent = `${monthNames[currentMonth]} ${currentYear}`;
            
            // Clear calendar
            calendar.innerHTML = '';
            
            // Add day headers
            const dayHeaders = ['Ahd', 'Isn', 'Sel', 'Rab', 'Kha', 'Jum', 'Sab'];
            dayHeaders.forEach(day => {
                const dayHeader = document.createElement('div');
                dayHeader.className = 'p-2 text-center text-sm font-medium text-gray-500';
                dayHeader.textContent = day;
                calendar.appendChild(dayHeader);
            });
            
            // Get first day of month and number of days
            const firstDay = new Date(currentYear, currentMonth, 1).getDay();
            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
            
            // Add empty cells for days before month starts
            for (let i = 0; i < firstDay; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'p-2';
                calendar.appendChild(emptyDay);
            }
            
            // Add days of month
            for (let day = 1; day <= daysInMonth; day++) {
                const dayCell = document.createElement('div');
                dayCell.className = 'p-2 text-center text-sm hover:bg-blue-50 cursor-pointer rounded';
                dayCell.textContent = day;
                
                // Highlight today
                const today = new Date();
                if (currentYear === today.getFullYear() && currentMonth === today.getMonth() && day === today.getDate()) {
                    dayCell.classList.add('bg-blue-600', 'text-white');
                }
                
                // Add some sample sessions
                if ([5, 12, 18, 25].includes(day)) {
                    dayCell.classList.add('bg-green-100', 'text-green-800');
                    dayCell.title = 'Ada sesi dijadualkan';
                }
                
                calendar.appendChild(dayCell);
            }
        }

        function prevMonth() {
            currentMonth--;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            generateCalendar();
        }

        function nextMonth() {
            currentMonth++;
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            generateCalendar();
        }

        // Initialize dashboard
        function initDashboard() {
            updateStatistics();
            renderTable();
            updateDateTime();
            setInterval(updateDateTime, 60000); // Update every minute
            
            // Initialize charts after a short delay
            setTimeout(() => {
                initCharts();
            }, 100);
        }

        // Update statistics
        function updateStatistics() {
            document.getElementById('totalAtlet').textContent = atletData.length;
            document.getElementById('sesiKumpulan').textContent = atletData.filter(a => a.jenisSesi === 'Kumpulan').length;
            document.getElementById('sesiIndividu').textContent = atletData.filter(a => a.jenisSesi === 'Individu').length;
        }

        // Enhanced Render Table with Progress
        function renderTable(data = atletData) {
            const tbody = document.getElementById('atletTable');
            tbody.innerHTML = '';

            data.forEach(atlet => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-medium text-gray-900">${atlet.nama}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${atlet.umur}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${atlet.acaraSukan}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${atlet.jurulatih}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${atlet.jenisSesi === 'Individu' ? 'bg-blue-100 text-blue-800' : 'bg-green-100 text-green-800'}">
                            ${atlet.jenisSesi}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="flex-1 bg-gray-200 rounded-full h-2 mr-2">
                                <div class="progress-bar h-2 rounded-full" style="width: ${atlet.progress || 0}%"></div>
                            </div>
                            <span class="text-sm text-gray-600">${atlet.progress || 0}%</span>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                            Aktif
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2">
                        <button onclick="viewDetail(${atlet.id})" class="text-blue-600 hover:text-blue-900">Lihat</button>
                        <button onclick="editAtlet(${atlet.id})" class="text-indigo-600 hover:text-indigo-900">Edit</button>
                        <button onclick="deleteAtlet(${atlet.id})" class="text-red-600 hover:text-red-900">Padam</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Show add form
        function showAddForm() {
            editingId = null;
            document.getElementById('formTitle').textContent = 'Tambah Atlet Baru';
            document.getElementById('atletForm').reset();
            document.getElementById('formModal').classList.remove('hidden');
        }

        // Edit athlete
        function editAtlet(id) {
            const atlet = atletData.find(a => a.id === id);
            if (!atlet) return;

            editingId = id;
            document.getElementById('formTitle').textContent = 'Edit Atlet';
            
            // Populate form
            document.getElementById('nama').value = atlet.nama;
            document.getElementById('umur').value = atlet.umur;
            document.getElementById('jantina').value = atlet.jantina;
            document.getElementById('acaraSukan').value = atlet.acaraSukan;
            document.getElementById('jurulatih').value = atlet.jurulatih;
            document.getElementById('jenisSesi').value = atlet.jenisSesi;
            document.getElementById('dapatanSesi').value = atlet.dapatanSesi;
            document.getElementById('intervensi').value = atlet.intervensi;
            document.getElementById('tindakan').value = atlet.tindakan;
            document.getElementById('mentalToughness').value = atlet.mentalToughness;
            document.getElementById('confidenceLevel').value = atlet.confidenceLevel;
            document.getElementById('stressManagement').value = atlet.stressManagement;
            document.getElementById('focusLevel').value = atlet.focusLevel;
            
            // Update range displays
            updateRangeValue('mentalToughness', 'mentalToughnessValue');
            updateRangeValue('confidenceLevel', 'confidenceLevelValue');
            updateRangeValue('stressManagement', 'stressManagementValue');
            updateRangeValue('focusLevel', 'focusLevelValue');
            
            document.getElementById('formModal').classList.remove('hidden');
        }

        // View detail
        function viewDetail(id) {
            const atlet = atletData.find(a => a.id === id);
            if (!atlet) return;

            const content = document.getElementById('detailContent');
            content.innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-semibold text-gray-800 mb-2">Maklumat Peribadi</h4>
                        <div class="space-y-2 text-sm">
                            <p><span class="font-medium">Nama:</span> ${atlet.nama}</p>
                            <p><span class="font-medium">Umur:</span> ${atlet.umur} tahun</p>
                            <p><span class="font-medium">Jantina:</span> ${atlet.jantina}</p>
                        </div>
                    </div>
                    <div>
                        <h4 class="font-semibold text-gray-800 mb-2">Maklumat Sukan</h4>
                        <div class="space-y-2 text-sm">
                            <p><span class="font-medium">Acara Sukan:</span> ${atlet.acaraSukan}</p>
                            <p><span class="font-medium">Jurulatih:</span> ${atlet.jurulatih}</p>
                            <p><span class="font-medium">Jenis Sesi:</span> ${atlet.jenisSesi}</p>
                        </div>
                    </div>
                </div>
                
                <div class="mt-6">
                    <h4 class="font-semibold text-gray-800 mb-2">Penilaian Psikologi</h4>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-blue-600">${atlet.mentalToughness}/10</div>
                            <div class="text-xs text-gray-600">Mental Toughness</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-green-600">${atlet.confidenceLevel}/10</div>
                            <div class="text-xs text-gray-600">Confidence Level</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-yellow-600">${atlet.stressManagement}/10</div>
                            <div class="text-xs text-gray-600">Stress Management</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-purple-600">${atlet.focusLevel}/10</div>
                            <div class="text-xs text-gray-600">Focus Level</div>
                        </div>
                    </div>
                </div>
                
                <div class="mt-6">
                    <h4 class="font-semibold text-gray-800 mb-2">Dapatan Sesi</h4>
                    <p class="text-sm text-gray-600 bg-gray-50 p-3 rounded-lg">${atlet.dapatanSesi || 'Tiada catatan'}</p>
                </div>
                
                <div class="mt-6">
                    <h4 class="font-semibold text-gray-800 mb-2">Intervensi dan Penilaian</h4>
                    <p class="text-sm text-gray-600 bg-gray-50 p-3 rounded-lg">${atlet.intervensi || 'Tiada catatan'}</p>
                </div>
                
                <div class="mt-6">
                    <h4 class="font-semibold text-gray-800 mb-2">Tindakan / Cadangan</h4>
                    <p class="text-sm text-gray-600 bg-gray-50 p-3 rounded-lg">${atlet.tindakan || 'Tiada catatan'}</p>
                </div>
            `;
            
            document.getElementById('detailModal').classList.remove('hidden');
        }

        // Delete athlete
        function deleteAtlet(id) {
            if (confirm('Adakah anda pasti ingin memadam data atlet ini?')) {
                atletData = atletData.filter(a => a.id !== id);
                updateStatistics();
                renderTable();
                showNotification('Data atlet berjaya dipadam!', 'success');
            }
        }

        // Close form
        function closeForm() {
            document.getElementById('formModal').classList.add('hidden');
        }

        // Close detail
        function closeDetail() {
            document.getElementById('detailModal').classList.add('hidden');
        }

        // Search athletes
        function searchAtlet() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const filteredData = atletData.filter(atlet => 
                atlet.nama.toLowerCase().includes(searchTerm) ||
                atlet.acaraSukan.toLowerCase().includes(searchTerm) ||
                atlet.jurulatih.toLowerCase().includes(searchTerm)
            );
            renderTable(filteredData);
        }

        // Advanced Filtering
        function filterAtlets() {
            const acara = document.getElementById('filterAcara').value;
            const jenisSesi = document.getElementById('filterJenisSesi').value;
            
            let filteredData = atletData;
            
            if (acara) {
                filteredData = filteredData.filter(a => a.acaraSukan === acara);
            }
            
            if (jenisSesi) {
                filteredData = filteredData.filter(a => a.jenisSesi === jenisSesi);
            }
            
            renderTable(filteredData);
        }

        // Export data
        function exportData() {
            const csvContent = "data:text/csv;charset=utf-8," 
                + "Nama,Umur,Jantina,Acara Sukan,Jurulatih,Jenis Sesi,Mental Toughness,Confidence Level,Stress Management,Focus Level,Progress,Dapatan Sesi,Intervensi,Tindakan\n"
                + atletData.map(a => 
                    `"${a.nama}","${a.umur}","${a.jantina}","${a.acaraSukan}","${a.jurulatih}","${a.jenisSesi}","${a.mentalToughness}","${a.confidenceLevel}","${a.stressManagement}","${a.focusLevel}","${a.progress}","${a.dapatanSesi}","${a.intervensi}","${a.tindakan}"`
                ).join("\n");

            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "data_psikologi_atlet_ssmt_2025.csv");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showNotification('Data berjaya dieksport!', 'success');
        }

        // Report Generation
        function generateReport() {
            showNotification('Laporan PDF sedang dijana...', 'info');
            
            // Simulate PDF generation
            setTimeout(() => {
                showNotification('Laporan PDF berjaya dijana!', 'success');
            }, 2000);
        }

        function downloadWeeklyReport() {
            showNotification('Laporan mingguan dimuat turun', 'success');
        }

        function downloadMonthlyReport() {
            showNotification('Laporan bulanan dimuat turun', 'success');
        }

        function downloadYearlyReport() {
            showNotification('Laporan tahunan dimuat turun', 'success');
        }

        // Goal Management
        function showGoalForm() {
            showNotification('Borang matlamat baru akan dibuka', 'info');
        }

        function showScheduleForm() {
            showNotification('Borang jadual sesi baru akan dibuka', 'info');
        }

        function showAttendanceForm() {
            showNotification('Borang kehadiran akan dibuka', 'info');
        }

        // Notifications System
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${
                type === 'success' ? 'bg-green-500 text-white' :
                type === 'error' ? 'bg-red-500 text-white' :
                'bg-blue-500 text-white'
            }`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Enhanced Form Submission
        document.getElementById('atletForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                nama: document.getElementById('nama').value,
                umur: parseInt(document.getElementById('umur').value),
                jantina: document.getElementById('jantina').value,
                acaraSukan: document.getElementById('acaraSukan').value,
                jurulatih: document.getElementById('jurulatih').value,
                jenisSesi: document.getElementById('jenisSesi').value,
                dapatanSesi: document.getElementById('dapatanSesi').value,
                intervensi: document.getElementById('intervensi').value,
                tindakan: document.getElementById('tindakan').value,
                mentalToughness: parseInt(document.getElementById('mentalToughness').value),
                confidenceLevel: parseInt(document.getElementById('confidenceLevel').value),
                stressManagement: parseInt(document.getElementById('stressManagement').value),
                focusLevel: parseInt(document.getElementById('focusLevel').value),
                progress: Math.floor(Math.random() * 40) + 60, // Random progress 60-100%
                lastSession: new Date().toISOString().split('T')[0]
            };

            if (editingId) {
                // Update existing
                const index = atletData.findIndex(a => a.id === editingId);
                atletData[index] = { ...atletData[index], ...formData };
                showNotification('Data atlet berjaya dikemaskini!', 'success');
            } else {
                // Add new
                const newId = Math.max(...atletData.map(a => a.id)) + 1;
                atletData.push({ id: newId, ...formData });
                showNotification('Atlet baru berjaya ditambah!', 'success');
            }

            updateStatistics();
            renderTable();
            closeForm();
        });

        // Logout function
        function logout() {
            if (confirm('Adakah anda pasti ingin log keluar?')) {
                showNotification('Anda telah log keluar', 'info');
                // In real app, redirect to login page
            }
        }

        // Update current date time
        function updateDateTime() {
            const now = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            };
            document.getElementById('currentDateTime').textContent = now.toLocaleDateString('ms-MY', options);
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            initDashboard();
        });

        // Handle responsive sidebar
        window.addEventListener('resize', function() {
            if (window.innerWidth > 768) {
                document.getElementById('sidebar').classList.remove('sidebar-hidden');
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96bed416d491a846',t:'MTc1NDY1NDE2Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
